<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src http://localhost:*">
    <title>Analytica Desktop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-brand">
                <span class="logo">ðŸ“Š</span>
                <span class="title">Analytica</span>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="investment">
                    <span class="icon">ðŸ’°</span>
                    <span>Investment</span>
                </button>
                <button class="nav-item" data-view="budget">
                    <span class="icon">ðŸ“‹</span>
                    <span>Budget</span>
                </button>
                <button class="nav-item" data-view="forecast">
                    <span class="icon">ðŸ“ˆ</span>
                    <span>Forecast</span>
                </button>
                <button class="nav-item" data-view="dsl">
                    <span class="icon">âš¡</span>
                    <span>DSL Editor</span>
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <span class="version">v1.0.0</span>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Investment View -->
            <section class="view active" id="view-investment">
                <header class="view-header">
                    <h1>Investment Analysis</h1>
                    <p>Calculate ROI, NPV, IRR and payback period</p>
                </header>
                
                <div class="form-section">
                    <div class="form-group">
                        <label>Initial Investment (PLN)</label>
                        <input type="number" id="initial-investment" value="1000000" min="0">
                    </div>
                    <div class="form-group">
                        <label>Discount Rate (%)</label>
                        <input type="number" id="discount-rate" value="12" min="0" max="100" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Cash Flows (comma-separated)</label>
                        <input type="text" id="cash-flows" value="200000, 300000, 400000, 500000, 600000">
                    </div>
                    <button class="btn btn-primary" onclick="runInvestmentAnalysis()">
                        Analyze Investment
                    </button>
                </div>
                
                <div class="results-section" id="investment-results">
                    <!-- Results rendered here -->
                </div>
            </section>

            <!-- Budget View -->
            <section class="view" id="view-budget">
                <header class="view-header">
                    <h1>Budget Planner</h1>
                    <p>Track spending and analyze variance</p>
                </header>
                <div class="results-section" id="budget-results">
                    <p class="placeholder">Select or create a budget to begin.</p>
                </div>
            </section>

            <!-- Forecast View -->
            <section class="view" id="view-forecast">
                <header class="view-header">
                    <h1>Forecast Generator</h1>
                    <p>Predict future trends from historical data</p>
                </header>
                <div class="results-section" id="forecast-results">
                    <p class="placeholder">Load historical data to generate forecast.</p>
                </div>
            </section>

            <!-- DSL Editor View -->
            <section class="view" id="view-dsl">
                <header class="view-header">
                    <h1>DSL Editor</h1>
                    <p>Write and execute custom DSL pipelines</p>
                </header>
                
                <div class="dsl-editor-container">
                    <textarea id="dsl-input" class="dsl-textarea" placeholder="Enter DSL pipeline...">data.from_input()
| investment.analyze(initial_investment=1000000, discount_rate=0.12, cash_flows=[200000, 300000, 400000])
| view.card(value="npv", title="NPV", icon="ðŸ’°")
| view.card(value="roi", title="ROI", icon="ðŸ“ˆ")</textarea>
                    <div class="dsl-actions">
                        <button class="btn" onclick="validateDSL()">Validate</button>
                        <button class="btn btn-primary" onclick="executeDSL()">Execute</button>
                    </div>
                </div>
                
                <div class="results-section" id="dsl-results">
                    <!-- DSL output rendered here -->
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
